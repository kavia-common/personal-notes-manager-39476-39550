{"is_source_file": true, "format": "JavaScript", "description": "This file defines a NotesService class that provides an abstraction for persisting and manipulating notes and tags. It utilizes localStorage for data storage and offers methods for CRUD operations, tag management, and data retrieval.", "external_files": [], "external_methods": ["localStorage.getItem", "localStorage.setItem", "JSON.parse", "JSON.stringify", "Date", "Array.from", "Set", "process.env"], "published": ["NotesService"], "classes": [{"name": "NotesService", "description": "A class that manages notes and tags persistence using localStorage, providing methods for create, read, update, delete, and tag management."}], "methods": [{"name": "constructor()", "description": "Initializes the NotesService with an optional API base URL from environment variables.", "scope": "NotesService", "scopeKind": "class"}, {"name": "_load()", "description": "Loads notes data from localStorage, parsing JSON or returning an empty array on failure.", "scope": "NotesService", "scopeKind": "class"}, {"name": "_save(notes)", "description": "Saves the given notes array to localStorage as a JSON string.", "scope": "NotesService", "scopeKind": "class"}, {"name": "_loadTags()", "description": "Loads tag data from localStorage, parsing JSON or returning an empty array on failure.", "scope": "NotesService", "scopeKind": "class"}, {"name": "_saveTags(tags)", "description": "Saves the given tags array to localStorage as a JSON string.", "scope": "NotesService", "scopeKind": "class"}, {"name": "list({ includeDeleted = false } = {})", "description": "Returns a list of notes, optionally including deleted notes, sorted by update time descending.", "scope": "NotesService", "scopeKind": "class"}, {"name": "get", "description": "Retrieves a note by its ID."}, {"name": "create", "description": "Creates a new note, adds it to storage, and merges its tags."}, {"name": "update", "description": "Updates an existing note identified by ID with provided changes and refreshes its timestamp."}, {"name": "delete", "description": "Marks a note as deleted without removing it from storage."}, {"name": "purge", "description": "Removes a note permanently from storage."}, {"name": "restore", "description": "Restores a previously deleted note."}, {"name": "listTags", "description": "Returns a sorted list of unique tags."}, {"name": "addTag", "description": "Adds a new tag to the tag list if it doesn't already exist."}, {"name": "removeTag", "description": "Removes a specific tag from all notes and the tag list."}, {"name": "_mergeTagsFromNote", "description": "Merges tags from a given note into the global tag list, avoiding duplicates."}], "calls": ["localStorage.getItem", "localStorage.setItem", "JSON.parse", "JSON.stringify", "new Date", "Array.from", "Set", "this._load", "this._save", "this._loadTags", "this._saveTags", "this.list", "this._mergeTagsFromNote"], "search-terms": ["NotesService", "localStorage persistence", "note CRUD JavaScript", "tag management JavaScript", "React environment variable API base"], "state": 2, "file_id": 16, "knowledge_revision": 34, "git_revision": "", "ctags": [{"_type": "tag", "name": "NotesService", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-39476-39550/frontend_react/src/services/NotesService.js", "pattern": "/^export class NotesService {$/", "language": "JavaScript", "kind": "class"}, {"_type": "tag", "name": "STORAGE_KEY", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-39476-39550/frontend_react/src/services/NotesService.js", "pattern": "/^const STORAGE_KEY = \"pnm.notes.v1\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "TAGS_KEY", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-39476-39550/frontend_react/src/services/NotesService.js", "pattern": "/^const TAGS_KEY = \"pnm.tags.v1\";$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "_load", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-39476-39550/frontend_react/src/services/NotesService.js", "pattern": "/^  _load() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "NotesService", "scopeKind": "class"}, {"_type": "tag", "name": "_loadTags", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-39476-39550/frontend_react/src/services/NotesService.js", "pattern": "/^  _loadTags() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "NotesService", "scopeKind": "class"}, {"_type": "tag", "name": "_save", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-39476-39550/frontend_react/src/services/NotesService.js", "pattern": "/^  _save(notes) {$/", "language": "JavaScript", "kind": "method", "signature": "(notes)", "scope": "NotesService", "scopeKind": "class"}, {"_type": "tag", "name": "_saveTags", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-39476-39550/frontend_react/src/services/NotesService.js", "pattern": "/^  _saveTags(tags) {$/", "language": "JavaScript", "kind": "method", "signature": "(tags)", "scope": "NotesService", "scopeKind": "class"}, {"_type": "tag", "name": "changed", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-39476-39550/frontend_react/src/services/NotesService.js", "pattern": "/^    const changed = next.length !== notes.length;$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-39476-39550/frontend_react/src/services/NotesService.js", "pattern": "/^  constructor() {$/", "language": "JavaScript", "kind": "method", "signature": "()", "scope": "NotesService", "scopeKind": "class"}, {"_type": "tag", "name": "id", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-39476-39550/frontend_react/src/services/NotesService.js", "pattern": "/^  get(id) {$/", "language": "JavaScript", "kind": "field", "scope": "NotesService", "scopeKind": "class"}, {"_type": "tag", "name": "idx", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-39476-39550/frontend_react/src/services/NotesService.js", "pattern": "/^    const idx = notes.findIndex(n => n.id === id);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-39476-39550/frontend_react/src/services/NotesService.js", "pattern": "/^  list({ includeDeleted = false } = {}) {$/", "language": "JavaScript", "kind": "method", "signature": "({ includeDeleted = false } = {})", "scope": "NotesService", "scopeKind": "class"}, {"_type": "tag", "name": "next", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-39476-39550/frontend_react/src/services/NotesService.js", "pattern": "/^    const next = notes.filter(n => n.id !== id);$/", "language": "JavaScript", "kind": "constant"}, {"_type": "tag", "name": "null", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-39476-39550/frontend_react/src/services/NotesService.js", "pattern": "/^    return this._load().find(n => n.id === id) || null;$/", "language": "JavaScript", "kind": "field", "scope": "NotesService", "scopeKind": "class"}, {"_type": "tag", "name": "tags", "path": "/home/kavia/workspace/code-generation/personal-notes-manager-39476-39550/frontend_react/src/services/NotesService.js", "pattern": "/^    const tags = new Set(this._loadTags());$/", "language": "JavaScript", "kind": "constant"}], "hash": "2ad68467ceb735b2338a9e08609c9d64", "format-version": 4, "code-base-name": "frontend_react", "filename": "frontend_react/src/services/NotesService.js", "fields": [{"name": "get(id) {", "scope": "NotesService", "scopeKind": "class", "description": "unavailable"}, {"name": "return this._load().find(n => n.id === id) || null;", "scope": "NotesService", "scopeKind": "class", "description": "unavailable"}], "revision_history": [{"34": ""}]}